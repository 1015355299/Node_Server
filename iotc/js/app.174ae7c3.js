(function(e){function t(t){for(var s,i,n=t[0],c=t[1],l=t[2],d=0,h=[];d<n.length;d++)i=n[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&h.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,n=1;n<a.length;n++){var c=a[n];0!==r[c]&&(s=!1)}s&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},r={app:0},o=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("85ec"),r=a.n(s);r.a},"44a3":function(e,t,a){"use strict";var s=a("5494"),r=a.n(s);r.a},"4ffd":function(e,t,a){e.exports=a.p+"img/logo.30fea7dc.png"},5328:function(e,t,a){"use strict";var s=a("57e7"),r=a.n(s);r.a},5494:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e623"),a("e379"),a("5dc8"),a("37e1");var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],i=(a("034f"),a("2877")),n={},c=Object(i["a"])(n,r,o,!1,null,null,null),l=c.exports,u=a("8c4f"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"layout"},[s("div",{staticClass:"container-main"},[s("header",{staticClass:"container-header"},[s("el-menu",{staticClass:"nav-menu",attrs:{"default-active":"home",mode:"horizontal","text-color":"#ffffffaa","active-text-color":"#ffd04baa",router:""}},[s("div",{staticClass:"logo-img"},[s("img",{attrs:{src:a("4ffd"),alt:"logo"}})]),s("el-menu-item",{attrs:{index:"home"}},[e._v("首页")]),s("el-menu-item",{attrs:{index:"config"}},[e._v("配置中心")])],1)],1),s("div",{staticClass:"container-body"},[s("router-view")],1)])])},h=[],p={data:function(){return{var:""}}},m=p,f=(a("9b07"),Object(i["a"])(m,d,h,!1,null,"557ca285",null)),_=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("h3",{staticClass:"title"},[e._v("5102物联网控制平台")]),a("div",{staticClass:"login-container"},[a("form",{attrs:{action:""},on:{submit:e.login}},[a("ul",{staticClass:"login-check"},[a("li",{staticClass:"login-title"},[e._v("登录")]),a("li",{staticClass:"login-username"},[a("label",{staticClass:"iconfont icon-wo",attrs:{for:"username"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.username,expression:"model.username"}],attrs:{id:"username"},domProps:{value:e.model.username},on:{input:function(t){t.target.composing||e.$set(e.model,"username",t.target.value)}}})]),a("li",{staticClass:"login-password"},[a("label",{staticClass:"iconfont icon-suo",attrs:{for:"password"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.password,expression:"model.password"}],attrs:{id:"password",type:"password"},domProps:{value:e.model.password},on:{input:function(t){t.target.composing||e.$set(e.model,"password",t.target.value)}}})]),a("li",{staticClass:"login-button"},[a("button",{attrs:{type:"submit"}},[e._v(" 登录 ")]),a("button",{on:{click:e.register}},[e._v(" 注册 ")])])])])])])},v=[],b=(a("96cf"),a("1da1")),w=a("8237"),y=a.n(w),C={data:function(){return{model:{}}},methods:{login:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/login",{user:e.model.username,password:y()(e.model.password)});case 3:a=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",e.$message.error("登录失败！"));case 9:0===a.data.state&&a.data.token?(localStorage.setItem("iotc_token",a.data.token),localStorage.setItem("iotc_user",e.model.username),e.$message.success(a.data.message),e.$router.push("/home")):e.$message.warning(a.data.message);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},register:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.preventDefault(),a.prev=1,a.next=4,t.$http.post("/register",{user:t.model.username,password:y()(t.model.password)});case 4:s=a.sent,a.next=10;break;case 7:return a.prev=7,a.t0=a["catch"](1),a.abrupt("return",t.$message.error("注册失败！"));case 10:return 0===s.data.state?t.$message.success(s.data.message):t.$message.warning(s.data.message),a.abrupt("return",!1);case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))()}}},x=C,S=(a("44a3"),Object(i["a"])(x,g,v,!1,null,"4a80d3f8",null)),k=S.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home-main"},[a("div",{staticClass:"main-container"},[e._m(0),a("div",{staticClass:"main-body",staticStyle:{color:"#fff"}},[a("div",{staticClass:"ls-item main-body-top"},[a("i"),a("div",{staticClass:"car-select"},[a("el-select",{attrs:{"popper-class":"car-select-item",size:"mini",placeholder:"请选择连接的设备"},on:{change:e.handleChangeCar},model:{value:e.curSelectCar,callback:function(t){e.curSelectCar=t},expression:"curSelectCar"}},e._l(e.carSelectList,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.secret}})})),1)],1),a("div",{staticClass:"car-state",attrs:{title:e.mqttIsConnected?"MQTT服务器已连接":"MQTT服务器未连接"}},[a("div",{class:e.mqttIsConnected?"car-state-connected":"car-state-disconnect"},[a("i",{class:"iconfont "+(e.mqttIsConnected?"icon-B":"icon-duankailianjie1")})])]),a("div",{staticClass:"car-state",attrs:{title:e.curEchartsData.controlIsConnected?"云控制服务器已连接":"云控制服务器未连接"}},[a("i",{class:"iconfont icon-zaixian "+(e.curEchartsData.controlIsConnected?"car-state-connected":"car-state-disconnect")})]),a("div",{staticClass:"zhenglv",attrs:{title:"帧率"}},[a("i",{staticClass:"iconfont icon-frequency",staticStyle:{color:"yellow","padding-right":"10px"}}),e._v(e._s(e.curEchartsData.camera_frame)+" FPS ")]),a("div",{staticClass:"openImg",attrs:{disabled:!e.propsIsOk["camera_is_abort"],title:e.propsIsOk["camera_is_abort"]?"":"生效中"}},[e._v(" 视频： "),a("div",{class:"img-state "+(e.curEchartsData.camera_is_abort?"cur-img-state":""),on:{click:function(t){return e.handleChangeCameraState(1)}}},[e._v(" 关 ")]),a("div",{class:"img-state "+(e.curEchartsData.camera_is_abort?"":"cur-img-state"),on:{click:function(t){return e.handleChangeCameraState(0)}}},[e._v(" 开 ")])])]),a("div",{staticClass:"ls-item img-container"},[a("i"),a("div",{class:e.curEchartsData.camera_is_abort?"offline":"online"},[e._v(" "+e._s(e.curEchartsData.camera_is_abort?"● offLine":"● Live")+" ")]),a("div",{class:e.propsIsOk["camera_is_abort"]&&e.hasReceiveImgData?"hidden":"is-disabled-0"},[e._v(" "+e._s(e.curEchartsData.camera_is_abort?"视频已断开":"视频连接中...")+" ")]),a("img",{attrs:{id:"imgData"}}),a("div",{staticClass:"downloadImg",attrs:{title:"保存图片"},on:{click:e.handleSaveImg}},[a("i",{staticClass:"iconfont icon-baocuntupian"})])]),a("div",{staticClass:"ls-item main-body-bottom"},[a("i"),a("el-slider",{staticClass:"set-speed-whole",attrs:{min:0,max:200,"show-tooltip":"",vertical:"",height:"120","format-tooltip":function(e){return"设置旋转速度:"+e+"cm/s"}},model:{value:e.curEchartsData.set_dir_speed_whole,callback:function(t){e.$set(e.curEchartsData,"set_dir_speed_whole",t)},expression:"curEchartsData.set_dir_speed_whole"}}),a("el-slider",{staticClass:"duoji-2",attrs:{min:-45,max:135,"show-tooltip":"",vertical:"",step:1,height:"120",disabled:!e.propsIsOk["cur_duoji_2_angle"],title:e.propsIsOk["cur_duoji_2_angle"]?"":"生效中","format-tooltip":function(e){return"二维:"+(e<=0?"下旋"+-e:"上旋"+e)+"°"}},on:{change:function(t){return e.handleChangeDuoji("cur_duoji_2_angle")}},model:{value:e.curEchartsData.cur_duoji_2_angle,callback:function(t){e.$set(e.curEchartsData,"cur_duoji_2_angle",t)},expression:"curEchartsData.cur_duoji_2_angle"}}),a("div",{staticClass:"car-update",attrs:{title:"小车数据更新到云端"},on:{click:function(t){return e.handleSyncData("car")}}},[a("i",{staticClass:"iconfont icon-iconset0349"})]),a("div",{staticClass:"cloud-sync",attrs:{title:"云端数据同步到小车"},on:{click:function(t){return e.handleSyncData("cloud")}}},[a("i",{staticClass:"iconfont icon-ziyuan1412"})]),a("div",{staticClass:"drag-base"}),a("div",{attrs:{id:"drag-gun"}}),a("div",{attrs:{id:"drag-pointer"}}),a("div",{staticClass:"drag-mask"}),a("div",{staticClass:"turn-left",attrs:{title:"左旋"},on:{mousedown:function(t){return e.handleDirChange(1)},mouseup:function(t){return e.handleDirChange(0)},touchstart:function(t){return e.handleDirChange(1)},touchend:function(t){return e.handleDirChange(0)}}},[a("i",{staticClass:"iconfont icon-zuozhuan"})]),a("div",{staticClass:"turn-right",attrs:{title:"右旋"},on:{mousedown:function(t){return e.handleDirChange(-1)},mouseup:function(t){return e.handleDirChange(0)},touchstart:function(t){return e.handleDirChange(-1)},touchend:function(t){return e.handleDirChange(0)}}},[a("i",{staticClass:"iconfont icon-youzhuan"})]),a("el-slider",{staticClass:"duoji-1",attrs:{min:-135,max:135,step:1,"show-tooltip":"",disabled:!e.propsIsOk["cur_duoji_1_angle"],title:e.propsIsOk["cur_duoji_1_angle"]?"":"生效中","format-tooltip":function(e){return"一维:"+(e<=0?"左旋"+-e:"右旋"+e)+"°"}},on:{change:function(t){return e.handleChangeDuoji("cur_duoji_1_angle")}},model:{value:e.curEchartsData.cur_duoji_1_angle,callback:function(t){e.$set(e.curEchartsData,"cur_duoji_1_angle",t)},expression:"curEchartsData.cur_duoji_1_angle"}}),a("div",{staticClass:"speed-level"},[a("div",{class:"speed-level-stage "+(4===e.speedLevel?"cur-speed-level":""),on:{click:function(t){return e.handleSpeedLevel(4)}}},[e._v(" 低速 ")]),a("div",{class:"speed-level-stage "+(2===e.speedLevel?"cur-speed-level":""),on:{click:function(t){return e.handleSpeedLevel(2)}}},[e._v(" 中速 ")]),a("div",{class:"speed-level-stage "+(1===e.speedLevel?"cur-speed-level":""),on:{click:function(t){return e.handleSpeedLevel(1)}}},[e._v(" 高速 ")])]),a("div",{staticClass:"duoji-reset",attrs:{title:"舵机复位"},on:{click:e.handleDuojiReset}},[a("i",{staticClass:"iconfont icon-fuwei"})])],1)]),a("div",{staticClass:"right-aside"},[a("div",{staticClass:"rs-item"},[a("i"),a("div",{class:e.propsIsOk["cur_duoji_1_angle"]?"hidden":"is-disabled-1"},[e._v(" 生效中 ")]),a("div",{class:e.propsIsOk["cur_duoji_2_angle"]?"hidden":"is-disabled-2"},[e._v(" 生效中 ")]),a("div",{attrs:{id:"duoji-angle"}})]),a("div",{staticClass:"rs-item"},[a("i"),a("div",{staticClass:"camera-state-title"},[e._v("摄像头状态")]),a("div",{staticClass:"camera-state-content"},[a("div",{staticClass:"camera-left"},[a("ul",[a("li",[a("i",{staticClass:"iconfont icon-14"}),e._v("对比度："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_contrast"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_contrast"],title:e.propsIsOk["camera_contrast"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_contrast")}},model:{value:e.curEchartsData.camera_contrast,callback:function(t){e.$set(e.curEchartsData,"camera_contrast",t)},expression:"curEchartsData.camera_contrast"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-saturation"}),e._v("饱和度："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_saturation"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_saturation"],title:e.propsIsOk["camera_saturation"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_saturation")}},model:{value:e.curEchartsData.camera_saturation,callback:function(t){e.$set(e.curEchartsData,"camera_saturation",t)},expression:"curEchartsData.camera_saturation"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-heibaipingheng"}),e._v("白平衡："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_light_mode"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_light_mode"],title:e.propsIsOk["camera_light_mode"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_light_mode")}},model:{value:e.curEchartsData.camera_light_mode,callback:function(t){e.$set(e.curEchartsData,"camera_light_mode",t)},expression:"curEchartsData.camera_light_mode"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-football_name"}),e._v("模式："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_mode"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_mode"],title:e.propsIsOk["camera_mode"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_mode")}},model:{value:e.curEchartsData.camera_mode,callback:function(t){e.$set(e.curEchartsData,"camera_mode",t)},expression:"curEchartsData.camera_mode"}},[a("el-option",{attrs:{label:"连续",value:0}})],1)],1),a("li",[a("i",{staticClass:"iconfont icon-geshi_tupianjpg"}),e._v("格式："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_workmode"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_workmode"],title:e.propsIsOk["camera_workmode"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_workmode")}},model:{value:e.curEchartsData.camera_workmode,callback:function(t){e.$set(e.curEchartsData,"camera_workmode",t)},expression:"curEchartsData.camera_workmode"}},[a("el-option",{attrs:{label:"JPG",value:1}})],1)],1)])]),a("div",{staticClass:"camera-right"},[a("ul",[a("li",[a("i",{staticClass:"iconfont icon-brightj2"}),e._v("亮度："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_brightness"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_brightness"],title:e.propsIsOk["camera_brightness"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_brightness")}},model:{value:e.curEchartsData.camera_brightness,callback:function(t){e.$set(e.curEchartsData,"camera_brightness",t)},expression:"curEchartsData.camera_brightness"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-texiao"}),e._v("特效："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_effect"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_effect"],title:e.propsIsOk["camera_effect"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_effect")}},model:{value:e.curEchartsData.camera_effect,callback:function(t){e.$set(e.curEchartsData,"camera_effect",t)},expression:"curEchartsData.camera_effect"}},e._l(e.camera_effectList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-puguang"}),e._v("曝光："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_autoexposure_level"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_autoexposure_level"],title:e.propsIsOk["camera_autoexposure_level"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_autoexposure_level")}},model:{value:e.curEchartsData.camera_autoexposure_level,callback:function(t){e.$set(e.curEchartsData,"camera_autoexposure_level",t)},expression:"curEchartsData.camera_autoexposure_level"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-tiaoxingma"}),e._v("彩条："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_color_bar"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_color_bar"],title:e.propsIsOk["camera_color_bar"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_color_bar")}},model:{value:e.curEchartsData.camera_color_bar,callback:function(t){e.$set(e.curEchartsData,"camera_color_bar",t)},expression:"curEchartsData.camera_color_bar"}},[a("el-option",{attrs:{label:"关闭",value:0}}),a("el-option",{attrs:{label:"开启",value:1}})],1)],1),a("li",[a("i",{staticClass:"iconfont icon-quanping_huaban1"}),e._v("尺寸："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_size"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_size"],title:e.propsIsOk["camera_size"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_size")}},model:{value:e.curEchartsData.camera_size,callback:function(t){e.$set(e.curEchartsData,"camera_size",t)},expression:"curEchartsData.camera_size"}},e._l(e.camera_size,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1)])])])]),a("div",{staticClass:"rs-item"},[a("i"),a("div",{staticClass:"stop-history-update",attrs:{title:e.stopHistoryUpdate?"开启更新":"停止更新"},on:{click:function(){return e.stopHistoryUpdate=!e.stopHistoryUpdate}}},[a("i",{class:"iconfont "+(e.stopHistoryUpdate?"icon-sync":"icon-tingzhi1"),style:"color:"+(e.stopHistoryUpdate?"yellow":"red")})]),a("div",{attrs:{id:"history-data"}})])])])])},E=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left-aside"},[a("div",{staticClass:"ls-item speed-whool"},[a("i"),a("div",{attrs:{id:"speed-whool"}})]),a("div",{staticClass:"ls-item speed-every"},[a("i"),a("div",{attrs:{id:"speed-every"}})])])}],I=(a("99af"),a("4160"),a("caad6"),a("d81d"),a("b680"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("2b3d"),a("2909")),O=a("b85c"),j=a("ade3"),L={data:function(){var e={cur_speed_whole:0,cur_speed_angle:0,set_speed_whole:0,set_speed_angle:0,set_speed_dir:0,set_dir_speed_whole:20,cur_speed_lq:0,cur_speed_rq:0,cur_speed_lh:0,cur_speed_rh:0,cur_duoji_1_angle:0,cur_duoji_2_angle:0,camera_mode:0,camera_workmode:1,camera_contrast:2,camera_saturation:4,camera_effect:0,camera_autoexposure_level:0,camera_light_mode:4,camera_brightness:3,camera_color_bar:0,camera_size:5,camera_is_abort:1,camera_frame:0,controlIsConnected:0,history_frame:[0],history_speed:[0],history_count:[1]};return{echartsData:e,options:[{backgroundColor:"transparent",title:{show:!0,text:"速度",left:"center",top:"5%",color:"#000000",fontSize:14,width:50,height:20},series:[{type:"gauge",min:0,max:200,startAngle:200,endAngle:-20,center:["50%","60%"],animationDurationUpdate:1e3,itemStyle:{color:"#77ddff",shadowColor:"rgba(0,138,255,0.45)",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2},progress:{show:!0,width:10,roundCap:!1,itemStyle:{color:{type:"linear",x:0,y:0,x2:1,y2:1,colorStops:[{offset:0,color:"#aaf"},{offset:1,color:"#55f"}],global:!1}}},axisLine:{lineStyle:{width:10}},axisTick:{show:!0},splitLine:{length:10,lineStyle:{width:2,color:"#aaf"}},axisLabel:{distance:20,color:"#999",fontSize:9},pointer:{icon:"path://M2090.36389,615.30999 L2090.36389,615.30999 C2091.48372,615.30999 2092.40383,616.194028 2092.44859,617.312956 L2096.90698,728.755929 C2097.05155,732.369577 2094.2393,735.416212 2090.62566,735.56078 C2090.53845,735.564269 2090.45117,735.566014 2090.36389,735.566014 L2090.36389,735.566014 C2086.74736,735.566014 2083.81557,732.63423 2083.81557,729.017692 C2083.81557,728.930412 2083.81732,728.84314 2083.82081,728.755929 L2088.2792,617.312956 C2088.32396,616.194028 2089.24407,615.30999 2090.36389,615.30999 Z",length:"80%",width:10,offsetCenter:[0,"5%"]},anchor:{show:!0,showAbove:!0,size:15,itemStyle:{borderWidth:8}},detail:{valueAnimation:!0,fontSize:20,color:"#bbbbff",offsetCenter:["20%","60%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"},rich:{value:{fontSize:30,fontWeight:"bolder",color:"#eee"},unit:{fontSize:14,color:"#aaa",padding:[0,0,-10,10]}}},data:[{value:e.cur_speed_whole}]}],media:[{query:{maxWidth:340},option:{title:{show:!1,text:"速度",left:"center",top:"5%",color:"#000000",fontSize:14,width:50,height:20},series:[{type:"gauge",min:0,max:200,startAngle:200,endAngle:-20,center:["50%","60%"],animationDurationUpdate:1e3,itemStyle:{color:"#77ddff",shadowColor:"rgba(0,138,255,0.45)",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2},progress:{show:!0,width:8,roundCap:!1,itemStyle:{color:{type:"linear",x:0,y:0,x2:1,y2:1,colorStops:[{offset:0,color:"#aaf"},{offset:1,color:"#55f"}],global:!1}}},axisLine:{lineStyle:{width:8}},axisTick:{show:!0},splitLine:{length:8,lineStyle:{width:1,color:"#aaf"}},axisLabel:{distance:10,color:"#999",fontSize:5},pointer:{icon:"path://M2090.36389,615.30999 L2090.36389,615.30999 C2091.48372,615.30999 2092.40383,616.194028 2092.44859,617.312956 L2096.90698,728.755929 C2097.05155,732.369577 2094.2393,735.416212 2090.62566,735.56078 C2090.53845,735.564269 2090.45117,735.566014 2090.36389,735.566014 L2090.36389,735.566014 C2086.74736,735.566014 2083.81557,732.63423 2083.81557,729.017692 C2083.81557,728.930412 2083.81732,728.84314 2083.82081,728.755929 L2088.2792,617.312956 C2088.32396,616.194028 2089.24407,615.30999 2090.36389,615.30999 Z",length:"80%",width:5,offsetCenter:[0,"5%"]},anchor:{show:!0,showAbove:!0,size:10,itemStyle:{borderWidth:4}},detail:{valueAnimation:!0,fontSize:10,color:"#bbbbff",offsetCenter:["20%","60%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"},rich:{value:{fontSize:15,fontWeight:"bolder",color:"#eee"},unit:{fontSize:8,color:"#aaa",padding:[0,0,-10,10]}}},data:[{value:e.cur_speed_whole}]}]}}]},{backgroundColor:"transparent",series:[{name:"左前轮",type:"gauge",color:["#f00"],min:-180,max:180,splitNumber:6,radius:"40%",animationDurationUpdate:1e3,center:["28%","28%"],axisLine:{lineStyle:{width:5,color:[[.5,"#ee5511"],[1,"#1155ee"]],shadowColor:"#7f7f7f",shadowBlur:2},backgroundColor:"none"},axisTick:{length:5,lineStyle:{color:"auto"},distance:1},splitLine:{length:3,lineStyle:{color:"rgba(255,255,255,0.7)"},distance:1},axisLabel:{borderRadius:1,color:"rgba(255,255,255,0.7)",padding:1,distance:10,fontSize:8},title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:[0,"95%"]},itemStyle:{color:"#1092ff"},detail:Object(j["a"])({shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"#000",textBorderWidth:1,textShadowBlur:1,textShadowColor:"#fff",textShadowOffsetX:0,textShadowOffsetY:0,paddingTop:5,fontFamily:"digital",fontSize:12,width:15,color:"#fff",rich:{},offsetCenter:[10,"70%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"}},"rich",{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:8,color:"#eee",padding:[0,0,-2,5]}}),data:[{value:e.cur_speed_lq,name:"左前轮"}]},{name:"右前轮",type:"gauge",color:["#f00"],min:-180,max:180,splitNumber:6,radius:"40%",animationDurationUpdate:1e3,center:["72%","28%"],axisLine:{lineStyle:{width:5,color:[[.5,"#ee5511"],[1,"#1155ee"]],shadowColor:"#7f7f7f",shadowBlur:2},backgroundColor:"none"},axisTick:{length:5,lineStyle:{color:"auto"},distance:1},splitLine:{length:3,lineStyle:{color:"rgba(255,255,255,0.7)"},distance:1},axisLabel:{borderRadius:1,color:"rgba(255,255,255,0.7)",padding:1,distance:10,fontSize:8},title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:[0,"95%"]},itemStyle:{color:"#1092ff"},detail:Object(j["a"])({shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"#000",textBorderWidth:1,textShadowBlur:1,textShadowColor:"#fff",textShadowOffsetX:0,textShadowOffsetY:0,paddingTop:5,fontFamily:"digital",fontSize:12,width:15,color:"#fff",rich:{},offsetCenter:[10,"70%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"}},"rich",{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:8,color:"#eee",padding:[0,0,-2,5]}}),data:[{value:e.cur_speed_rq,name:"右前轮"}]},{name:"左后轮",type:"gauge",color:["#f00"],min:-180,max:180,splitNumber:6,radius:"40%",animationDurationUpdate:1e3,center:["28%","75%"],axisLine:{lineStyle:{width:5,color:[[.5,"#ee5511"],[1,"#1155ee"]],shadowColor:"#7f7f7f",shadowBlur:2},backgroundColor:"none"},axisTick:{length:5,lineStyle:{color:"auto"},distance:1},splitLine:{length:3,lineStyle:{color:"rgba(255,255,255,0.7)"},distance:1},axisLabel:{borderRadius:1,color:"rgba(255,255,255,0.7)",padding:1,distance:10,fontSize:8},title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:[0,"95%"]},itemStyle:{color:"#1092ff"},detail:Object(j["a"])({shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"#000",textBorderWidth:1,textShadowBlur:1,textShadowColor:"#fff",textShadowOffsetX:0,textShadowOffsetY:0,paddingTop:5,fontFamily:"digital",fontSize:12,width:15,color:"#fff",rich:{},offsetCenter:[10,"70%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"}},"rich",{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:8,color:"#eee",padding:[0,0,-2,5]}}),data:[{value:e.cur_speed_lh,name:"左后轮"}]},{name:"右后轮",type:"gauge",color:["#f00"],min:-180,max:180,splitNumber:6,radius:"40%",animationDurationUpdate:1e3,center:["72%","75%"],axisLine:{lineStyle:{width:5,color:[[.5,"#ee5511"],[1,"#1155ee"]],shadowColor:"#7f7f7f",shadowBlur:2},backgroundColor:"none"},axisTick:{length:5,lineStyle:{color:"auto"},distance:1},splitLine:{length:3,lineStyle:{color:"rgba(255,255,255,0.7)"},distance:1},axisLabel:{borderRadius:1,color:"rgba(255,255,255,0.7)",padding:1,distance:10,fontSize:8},title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:[0,"95%"]},itemStyle:{color:"#1092ff"},detail:Object(j["a"])({shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"#000",textBorderWidth:1,textShadowBlur:1,textShadowColor:"#fff",textShadowOffsetX:0,textShadowOffsetY:0,paddingTop:5,fontFamily:"digital",fontSize:12,width:15,color:"#fff",rich:{},offsetCenter:[10,"70%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"}},"rich",{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:8,color:"#eee",padding:[0,0,-2,5]}}),data:[{value:e.cur_speed_rh,name:"右后轮"}]}]},{backgroundColor:"transparent",title:{show:!0,text:"舵机角度",left:"center",top:"5%",color:"#000000",fontSize:12,width:50,height:20},series:[{type:"gauge",radius:"50%",center:["30%","55%"],min:135,max:-135,startAngle:225,endAngle:-45,axisLine:{show:!0,lineStyle:{width:40,color:[[1,new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#5098ed88"},{offset:1,color:"#5098ed08"}])]]}},axisTick:{show:!0,splitNumber:2,length:5,distance:-45},splitLine:{show:!1},axisLabel:{show:!0,fontSize:6,distance:-35},pointer:{show:!1},detail:{show:!1}},{type:"gauge",radius:"50%",center:["30%","55%"],min:135,max:-135,startAngle:225,endAngle:-45,axisLine:{show:!0,lineStyle:{width:3,color:[[0,"#00FCF7"],[1,"#5098cc"]]}},pointer:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},detail:{show:!1}},{type:"gauge",animationDurationUpdate:1e3,radius:"20%",center:["30%","55%"],min:135,max:-135,startAngle:225,endAngle:-45,axisLine:{show:!1},pointer:{show:!0,icon:"roundRect",length:"220%",width:"10",offsetCenter:[0,0]},anchor:{show:!0,showAbove:!0,size:10,itemStyle:{color:"#5098aa"},icon:"circle"},itemStyle:{color:"rgba(0,255,255,0.3)"},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},detail:{show:!0,offsetCenter:["20%","140%"],fontSize:"8",color:"#08b5d6",formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|°}"},rich:{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:10,color:"#eee",padding:[0,0,2,3]}}},data:[{value:e.cur_duoji_1_angle,name:"一维舵机"}],title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:[0,"220%"]}},{type:"gauge",radius:"50%",center:["75%","55%"],min:45,max:-135,startAngle:225,endAngle:45,axisLine:{show:!0,lineStyle:{width:40,color:[[1,new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#5098ed38"},{offset:.5,color:"#5098ed88"},{offset:1,color:"#5098ed38"}])]]}},axisTick:{show:!0,splitNumber:2,length:5,distance:-45},splitLine:{show:!1},axisLabel:{show:!0,fontSize:6,distance:-35},pointer:{show:!1},detail:{show:!1}},{type:"gauge",radius:"50%",center:["75%","55%"],min:45,max:-135,startAngle:225,endAngle:45,axisLine:{show:!0,lineStyle:{width:3,color:[[0,"#00FCF7"],[1,"#5098cc"]]}},pointer:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},detail:{show:!1}},{type:"gauge",animationDurationUpdate:1e3,radius:"20%",center:["75%","55%"],min:45,max:-135,startAngle:225,endAngle:45,axisLine:{show:!1},pointer:{show:!0,icon:"roundRect",length:"220%",width:"10",offsetCenter:[0,0]},anchor:{show:!0,showAbove:!0,size:10,itemStyle:{color:"#5098aa"},icon:"circle"},itemStyle:{color:"rgba(0,255,255,0.3)"},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},detail:{show:!0,offsetCenter:["140%","0%"],fontSize:"8",color:"#08b5d6",formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|°}"},rich:{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:10,color:"#eee",padding:[0,0,2,3]}}},data:[{value:e.cur_duoji_2_angle,name:"二维舵机"}],title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:["140%","80%"]}}]},{backgroundColor:"transparent",tooltip:{trigger:"axis",axisPointer:{type:"shadow",textStyle:{color:"#fff"}}},grid:{borderWidth:0,top:30,bottom:50,textStyle:{color:"#fff"}},legend:{x:"50%",top:"5%",textStyle:{color:"#90979c"},data:["帧率","速度"]},calculable:!0,xAxis:[{type:"category",axisLine:{lineStyle:{color:"rgba(204,187,225,0.5)"}},splitLine:{show:!1},axisTick:{show:!1},data:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]}],yAxis:[{type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:"rgba(204,187,225,0.5)"}}}],dataZoom:[{show:!0,height:20,xAxisIndex:[0],bottom:10,start:70,end:100,handleIcon:"path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z",handleSize:"110%",handleStyle:{color:"#5B3AAE"},textStyle:{color:"rgba(204,187,225,0.5)"},fillerColor:"rgba(67,55,160,0.4)",borderColor:"rgba(204,187,225,0.5)"},{type:"inside",show:!0,height:20,start:0,end:100}],series:[{name:"帧率",type:"line",symbolSize:6,symbol:"circle",itemStyle:{color:"#6f7de3"},data:e.history_frame},{name:"速度",type:"line",symbolSize:6,symbol:"circle",itemStyle:{color:"#c257F6"},data:e.history_speed}]}],camera_effectList:["正常","负片","黑白","偏红色","偏绿色","偏蓝色","复古"],camera_size:["160*120","176*144","320*240","400*240","352*288","640*480","800*600","1024*768","1280*800","1280*960","1440*900","1280*1024","1600*1200"],curEchartsData:{cur_speed_whole:0,cur_speed_angle:0,set_speed_whole:0,set_speed_angle:0,set_speed_dir:0,set_dir_speed_whole:20,cur_speed_lq:0,cur_speed_rq:0,cur_speed_lh:0,cur_speed_rh:0,cur_duoji_1_angle:0,cur_duoji_2_angle:0,camera_mode:0,camera_workmode:1,camera_contrast:2,camera_saturation:4,camera_effect:0,camera_autoexposure_level:0,camera_light_mode:4,camera_brightness:3,camera_color_bar:0,camera_size:5,camera_is_abort:1,camera_frame:0,controlIsConnected:0,history_frame:[0],history_speed:[0],history_count:[1]},els:[],myEcharts:[],wss:null,dragEl:null,gunEl:null,maxDistance:80,statesData:null,DeviceName:"test2",ProductId:"K8LG8U17CW",clientToken:"",propsIsOk:{},propsTime:{},selectList:[0,1,2,3,4],stopHistoryUpdate:!1,preImgData:null,syncProps:["set_speed_whole","set_speed_dir","set_dir_speed_whole","cur_duoji_1_angle","cur_duoji_2_angle","camera_mode","camera_workmode","camera_contrast","camera_saturation","camera_effect","camera_autoexposure_level","camera_light_mode","camera_brightness","camera_color_bar","camera_size","camera_is_abort"],hasReceiveImgData:!1,mqttIsConnected:!1,mqttIsConnectedTime:0,speedLevel:4,carSelectList:[],curSelectCar:"",historyTimer:0}},watch:{echartsData:{handler:"putEchartsData",deep:!0},"curEchartsData.camera_is_abort":function(){this.hasReceiveImgData=!1}},mounted:function(){this.mapElementToEcharts(),this.drawAllEcharts(),this.syncDefaultConfig(),this.syncData(),this.openWebSocket(),this.initDrag(),this.initShowHistory(),this.getDeviceByUser(),this.setMove=this.throttle(this.setMove,200)},befordistory:function(){this.wss&&this.wss.close(),clearInterval(this.historyTimer),this.wss=null,this.els=null,this.myEcharts=null,this.dragEl=null,this.gunEl=null,window.onresize=null},computed:{K:function(){return 160/this.speedLevel/this.maxDistance}},methods:{putProps:function(e,t){var a=localStorage.getItem("iotc_secret")||"";return this.$http.put(e,{Payload:JSON.stringify({clientToken:this.clientToken,method:"control",params:t}),DeviceName:this.DeviceName,ProductId:this.ProductId,Topic:"$thing/down/property/".concat(this.ProductId,"/").concat(this.DeviceName),secret:a})},getHistoryProp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=localStorage.getItem("iotc_secret")||"";return this.$http.post("/historyPropValue",{DeviceName:this.DeviceName,FieldName:e,Limit:t,secret:a})},getSyncData:function(){var e=localStorage.getItem("iotc_user")||"",t=localStorage.getItem("iotc_secret")||"";return this.$http.post("/get/sync",{user:e,secret:t})},getDefaultConfig:function(){var e=localStorage.getItem("iotc_user")||"",t=localStorage.getItem("iotc_secret")||"";return this.$http.post("/get/default",{user:e,secret:t})},getDeviceList:function(){var e=localStorage.getItem("iotc_user")||"",t=localStorage.getItem("iotc_secret")||"";return this.$http.post("/public/deviceList",{user:e,secret:t})},putMove:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.putMove.timer){var r=localStorage.getItem("iotc_secret")||"";a&&(this.putMove.timer=setTimeout((function(){t.putMove.timer=0}),s));var o={set_speed_whole:"w-0",set_speed_angle:"a-0",set_speed_dir:"d-0",set_dir_speed_whole:"w-1"},i={};for(var n in e)i[o[n]]=e[n];return this.$http.post("/move",{secret:r,data:i,debounce:a,time:s})}},showHistoryData:function(e,t){var a=this;return Object(b["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,a.getHistoryProp(e);case 3:r=s.sent,s.next=8;break;case 6:s.prev=6,s.t0=s["catch"](0);case 8:r&&r.data&&r.data.Results instanceof Array&&(a.echartsData[t]=r.data.Results.map((function(e){return+e.Value})));case 9:case"end":return s.stop()}}),s,null,[[0,6]])})))()},propsChange:function(e){var t=arguments,a=this;return Object(b["a"])(regeneratorRuntime.mark((function s(){var r,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=t.length>1&&void 0!==t[1]&&t[1],r||(a.propsIsOk[e]=!1,a.propsTime[e]=setTimeout((function(){a.propsIsOk[e]=!0,a.curEchartsData[e]=a.echartsData[e]}),8e3)),s.prev=2,o=Object(j["a"])({},e,a.curEchartsData[e]),s.next=6,a.putProps("/putProps",o);case 6:s.sent,s.next=11;break;case 9:s.prev=9,s.t0=s["catch"](2);case 11:case"end":return s.stop()}}),s,null,[[2,9]])})))()},syncDefaultConfig:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getDefaultConfig();case 3:a=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:a.data.data&&(s=JSON.parse(a.data.data),Object.assign(e.curEchartsData,s));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},syncData:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getSyncData();case 3:a=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:a.data.data&&(s=a.data.data.split(","),e.syncProps=s);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getDeviceByUser:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getDeviceList();case 3:a=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:a.data.data&&(e.carSelectList=JSON.parse(a.data.data)||[]),e.showMessage(a.data.state,a.data.message);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},handleChangeCar:function(e){localStorage.setItem("iotc_secret",e)},handleChangeCameraState:function(e){this.curEchartsData.camera_is_abort=e,this.handleCameraChange("camera_is_abort")},handleSpeedLevel:function(e){this.speedLevel=e},handleSyncData:function(e){if("car"===e){if(this.statesData){var t,a=Object(O["a"])(this.syncProps);try{for(a.s();!(t=a.n()).done;){var s=t.value;this.curEchartsData[s]=this.echartsData[s]}}catch(n){a.e(n)}finally{a.f()}}}else{this.hasReceiveImgData=!1;var r,o=Object(O["a"])(this.syncProps);try{for(o.s();!(r=o.n()).done;){var i=r.value;"history_frame"!==i&&"history_speed"!==i||contniue,this.propsChange(i)}}catch(n){o.e(n)}finally{o.f()}}},handleSaveImg:function(){var e=document.createElement("a");e.style.display="none",e.href=this.preImgData,e.setAttribute("download","图片".concat(Date.now(),".jpg")),document.body.appendChild(e),e.click()},handleDirChange:function(e){this.curEchartsData.set_speed_dir=e,e?this.putMove({set_dir_speed_whole:this.curEchartsData.set_dir_speed_whole,set_speed_dir:e}):this.resetMove()},handleCameraChange:function(e){this.propsChange(e)},handleDuojiReset:function(){this.curEchartsData.cur_duoji_1_angle=0,this.curEchartsData.cur_duoji_2_angle=0,this.propsChange("cur_duoji_1_angle"),this.propsChange("cur_duoji_2_angle")},handleChangeDuoji:function(e){this.propsChange(e)},showMessage:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case 0:a&&this.$message.success(t);break;case-1:break;default:a&&this.$message.warning(t);break}},setEl:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.dragEl.display="none",this.gunEl.display="none",this.dragEl.style.left=e+"px",this.dragEl.style.top=t+"px",this.gunEl.style.width=a+"px",this.dragEl.display="block",this.gunEl.display="block"},resetMove:function(){this.putMove({set_speed_whole:0,set_speed_angle:0,set_speed_dir:0,set_dir_speed_whole:this.curEchartsData.set_dir_speed_whole},!0,500)},throttle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=null;return function(){var r=arguments;if(s)return Promise.resolve();var o=this;return a?(a=!1,new Promise((function(t,a){s=setTimeout((function(){t(e.call.apply(e,[o].concat(Object(I["a"])(r)))),s=null}))}))):new Promise((function(a,i){s=setTimeout((function(){a(e.call.apply(e,[o].concat(Object(I["a"])(r)))),s=null}),t)}))}},setMove:function(e,t,a,s){e*=this.K,0===a&&0===s?t=0:a>=0&&s>=0?t=270-180*t/Math.PI:a>=0&&s<=0?t=270+180*t/Math.PI:a<=0&&s>=0?t=90+180*t/Math.PI:a<=0&&s<=0&&(t=90-180*t/Math.PI),this.putMove({set_speed_whole:Math.round(e),set_speed_angle:Math.round(t),set_speed_dir:0})},pollState:function(){var e=this;this.mqttIsConnected||this.$message.success("小车已连接MQTT服务器"),this.mqttIsConnected=!0,this.mqttIsConnectedTime&&clearTimeout(this.mqttIsConnectedTime),this.mqttIsConnectedTime=setTimeout((function(){e.mqttIsConnected=!1,e.curEchartsData.controlIsConnected=0,e.hasReceiveImgData=!1,e.statesData=null,e.curEchartsData.camera_is_abort=1,e.$message.warning("小车连接断开")}),1e4)},initShowHistory:function(){var e=this;this.historyTimer=setInterval((function(){e.stopHistoryUpdate||(e.syncProps.includes("history_frame")&&e.showHistoryData("camera_frame","history_frame"),e.syncProps.includes("history_speed")&&e.showHistoryData("cur_speed_whole","history_speed"))}),2e3)},setRotate:function(e,t,a){this.gunEl.display="none",e>=0&&t>=0?this.gunEl.style.transform="rotate(".concat(180*a/Math.PI,"deg)"):e<=0&&t<=0?this.gunEl.style.transform="rotate(".concat(180*(Math.PI+a)/Math.PI,"deg)"):e<=0&&t>=0?this.gunEl.style.transform="rotate(".concat(180*(Math.PI-a)/Math.PI,"deg)"):e>=0&&t<=0&&(this.gunEl.style.transform="rotate(".concat(180*-a/Math.PI,"deg)")),this.gunEl.display="block"},getDegree:function(e,t,a,s){return a===e?Math.PI/2:s===t?0:Math.abs(Math.atan((s-t)/(a-e)))},getDistance:function(e,t,a,s){var r=Math.abs(t-s),o=Math.abs(e-a);return r/Math.sin(Math.atan(r/o))||o},initDrag:function(){var e=this;this.dragEl=document.getElementById("drag-pointer"),this.gunEl=document.getElementById("drag-gun");var t,a,s,r,o,i,n=this.dragEl.offsetLeft,c=this.dragEl.offsetTop,l=!1;t=a=s=r=o=i=0;var u=function(e){return function(s){l=!0,t="pc"==e?s.pageX:s.changedTouches[0].pageX,a="pc"==e?s.pageY:s.changedTouches[0].pageY}};this.dragEl.onmousedown=u("pc"),this.dragEl.ontouchstart=u();var d=function(t){l=!1,e.setEl(n,c),e.resetMove()};this.dragEl.onmouseup=d,this.dragEl.ontouchend=d,this.dragEl.parentElement.parentElement.onmouseup=d,this.dragEl.parentElement.parentElement.ontouchend=d;var h=function(u){return function(d){if(l){var h="pc"==u?d.pageX:d.changedTouches[0].pageX,p="pc"==u?d.pageY:d.changedTouches[0].pageY;o=e.getDegree(t,a,h,p),i=e.getDistance(t,a,h,p),i>e.maxDistance?(i=e.maxDistance,s=Math.cos(o)*(h>t?e.maxDistance:-e.maxDistance),r=Math.sin(o)*(p>a?e.maxDistance:-e.maxDistance)):(s=h-t,r=p-a),e.setRotate(s,r,o),e.setEl(n+s,c+r,i+5),e.setMove(i,o,s,r)}}};this.dragEl.parentElement.parentElement.onmousemove=h("pc"),this.dragEl.parentElement.parentElement.ontouchmove=h()},putEchartsData:function(){if(this.statesData){var e,t=this.options,a=this.echartsData,s=this.curEchartsData;if(t[0].series[0].data[0].value=a.cur_speed_whole,t[1].series[0].data[0].value=a.cur_speed_lq,t[1].series[1].data[0].value=a.cur_speed_rq,t[1].series[2].data[0].value=a.cur_speed_lh,t[1].series[3].data[0].value=a.cur_speed_rh,t[2].series[2].data[0].value=-a.cur_duoji_1_angle,t[2].series[5].data[0].value=-a.cur_duoji_2_angle,!this.stopHistoryUpdate)this.syncProps.includes("history_frame")&&(e=Object(I["a"])(a.history_frame||[0]).reverse(),t[3].series[0].data=e),this.syncProps.includes("history_speed")&&(e=Object(I["a"])(a.history_speed||[0]).reverse(),t[3].series[1].data=e);for(var r in s.camera_frame=a.camera_frame,a)void 0===this.propsIsOk[r]&&this.$set(this.propsIsOk,r,!0),void 0===this.propsTime[r]&&this.$set(this.propsTime,r,0),s[r]===a[r]&&(this.propsIsOk[r]=!0,clearTimeout(this.propsTime[r]));for(var o in this.els)this.stopHistoryUpdate&&3==o||this.myEcharts[o].setOption(t[o])}},syncPushData:function(e){var t={};for(var a in e)this.syncProps.includes(a)&&(t[a]=e[a]);Object.assign(this.echartsData,t)},updateCarState:function(e){var t=this;this.pollState(),this.statesData||(setTimeout((function(){t.$message.warning("同步小车数据中...")}),1e3),setTimeout((function(){t.handleSyncData("cloud"),t.$message.success("小车数据同步完成")}),6e3)),this.statesData=e,this.clientToken=this.statesData.payload.clientToken,this.syncPushData(this.statesData.payload.params)},keepWssConnect:function(e){var t=this,a=localStorage.getItem("iotc_secret")||"";return!("ping"!==e||!a)&&(setTimeout((function(){t.wss.send("pong:".concat(a))}),3e3),!0)},wssReceiveMessage:function(e){this.keepWssConnect(e.data)||("string"===typeof e.data?(e=JSON.parse(e.data)||{},"states"===e.type&&this.updateCarState(e.data)):(this.preImgData=URL.createObjectURL(e.data),document.getElementById("imgData").src=this.preImgData,this.hasReceiveImgData=!0))},openWebSocket:function(){var e=this;this.wss=new WebSocket("wss://wlw.5102it.cn/websocket"),this.wss.onopen=function(){console.log("wss：连接建立")},this.wss.onmessage=this.wssReceiveMessage,this.wss.onerror=function(t){e.wss.close(),console.log("wss：连接出错")},this.wss.onclose=function(t,a){console.log("wss：连接关闭"),setTimeout((function(){console.log("ws：重试中..."),e.openWebSocket()}),1e3)}},mapElementToEcharts:function(){this.els.push(document.getElementById("speed-whool")),this.els.push(document.getElementById("speed-every")),this.els.push(document.getElementById("duoji-angle")),this.els.push(document.getElementById("history-data"))},drawAllEcharts:function(){var e=this;for(var t in this.els){var a=this.$echarts.init(this.els[t],"dark");a.setOption(this.options[t]),this.myEcharts.push(a)}window.onresize=function(t){e.initDrag(),e.myEcharts.forEach((function(e){return e.resize()}))}}}},z=L,$=(a("5328"),a("bf65"),Object(i["a"])(z,D,E,!1,null,"8f4401ea",null)),R=$.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"config-main"},[a("div",{staticClass:"main-top"},[a("el-card",{staticClass:"box-card",attrs:{"body-style":{color:"#eee"}}},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("MQTT服务器")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.handleConnectMqtt}},[e._v(e._s(e.mqttIsConnected?"断开连接":"开始连接"))])],1),a("div",{staticClass:"card-item"},[a("div",{staticClass:"card-item-left"},[a("ul",[a("li",[e._v(" 复位云控制连接："),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.loading.cloudControl},on:{click:e.handleResetCloudControl}},[a("i",{staticClass:"iconfont icon-fuwei1"})])],1),a("li",[e._v(" 需同步的数据： "),a("el-select",{staticClass:"sync-select",attrs:{multiple:"",placeholder:"请选择同步的数据"},model:{value:e.syncData,callback:function(t){e.syncData=t},expression:"syncData"}},e._l(e.syncGroup,(function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.data,(function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)})),1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini"},on:{click:e.handleChangeSyncData}},[e._v("保存")])],1)])]),a("div",{staticClass:"card-item-right"})])]),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("云控制服务器")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.handleConnectCloudControl}},[e._v(e._s(e.controlIsConnected?"断开连接":"开始连接"))])],1),a("div",{staticClass:"card-item"},[a("div",{staticClass:"card-item-left"},[a("ul",[a("li",[e._v(" 复位MQTT连接："),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.loading.mqtt},on:{click:e.handleResetMqtt}},[a("i",{staticClass:"iconfont icon-fuwei1"})])],1),a("li",[e._v(" 无线波特率："),a("el-input",{staticClass:"baud-rate",attrs:{size:"mini",placeholder:"请输入波特率,默认691200,最高691200",type:"number",clearable:""},model:{value:e.carState.baudRate,callback:function(t){e.$set(e.carState,"baudRate",t)},expression:"carState.baudRate"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini"},on:{click:e.handleBaudRate}},[e._v("保存")])],1),a("li",[e._v(" Bootloader操作："),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.handleEntryBootloader}},[e._v("进入")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleQuitBootloader}},[e._v("退出")])],1),a("li",[e._v(" 在线固件升级："),a("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:"https://wlw.5102it.cn/updatefirmware/","auto-upload":!1,multiple:!1,"show-file-list":!0,limit:1,"on-success":e.handleUploadSuccess,"on-error":e.handleUploadError,"file-list":e.fileList,"http-request":e.uploadFile}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取固件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.upload},on:{click:e.submitUpload}},[e._v("更新到设备")])],1)],1)])]),a("div",{staticClass:"card-item-right"})])])],1),a("div",{staticClass:"main-bottom"},[a("el-card",{staticClass:"box-card",attrs:{"body-style":{color:"#eee"}}},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("默认配置")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.handleChangeDefaultConfig}},[e._v("保存")])],1),a("div",{staticClass:"config-body"},[a("div",{staticClass:"camera-left"},[a("ul",[a("li",[a("i",{staticClass:"iconfont icon-14"}),e._v("对比度："),a("el-select",{class:"select-item ",attrs:{placeholder:"请选择","popper-class":"option-list"},model:{value:e.carState.camera_contrast,callback:function(t){e.$set(e.carState,"camera_contrast",t)},expression:"carState.camera_contrast"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-saturation"}),e._v("饱和度："),a("el-select",{class:"select-item ",attrs:{placeholder:"请选择","popper-class":"option-list"},model:{value:e.carState.camera_saturation,callback:function(t){e.$set(e.carState,"camera_saturation",t)},expression:"carState.camera_saturation"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-heibaipingheng"}),e._v("白平衡："),a("el-select",{class:"select-item ",attrs:{placeholder:"请选择","popper-class":"option-list"},model:{value:e.carState.camera_light_mode,callback:function(t){e.$set(e.carState,"camera_light_mode",t)},expression:"carState.camera_light_mode"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-football_name"}),e._v("模式："),a("el-select",{class:"select-item ",attrs:{placeholder:"请选择","popper-class":"option-list"},model:{value:e.carState.camera_mode,callback:function(t){e.$set(e.carState,"camera_mode",t)},expression:"carState.camera_mode"}},[a("el-option",{attrs:{label:"连续",value:0}})],1)],1),a("li",[a("i",{staticClass:"iconfont icon-geshi_tupianjpg"}),e._v("格式："),a("el-select",{class:"select-item ",attrs:{placeholder:"请选择","popper-class":"option-list"},model:{value:e.carState.camera_workmode,callback:function(t){e.$set(e.carState,"camera_workmode",t)},expression:"carState.camera_workmode"}},[a("el-option",{attrs:{label:"JPG",value:1}})],1)],1)])]),a("div",{staticClass:"camera-right"},[a("ul",[a("li",[a("i",{staticClass:"iconfont icon-brightj2"}),e._v("亮度："),a("el-select",{class:"select-item ",attrs:{placeholder:"请选择","popper-class":"option-list"},model:{value:e.carState.camera_brightness,callback:function(t){e.$set(e.carState,"camera_brightness",t)},expression:"carState.camera_brightness"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-texiao"}),e._v("特效："),a("el-select",{class:"select-item ",attrs:{placeholder:"请选择","popper-class":"option-list"},model:{value:e.carState.camera_effect,callback:function(t){e.$set(e.carState,"camera_effect",t)},expression:"carState.camera_effect"}},e._l(e.camera_effectList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-puguang"}),e._v("曝光："),a("el-select",{class:"select-item ",attrs:{placeholder:"请选择","popper-class":"option-list"},model:{value:e.carState.camera_autoexposure_level,callback:function(t){e.$set(e.carState,"camera_autoexposure_level",t)},expression:"carState.camera_autoexposure_level"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-tiaoxingma"}),e._v("彩条："),a("el-select",{class:"select-item ",attrs:{placeholder:"请选择","popper-class":"option-list"},model:{value:e.carState.camera_color_bar,callback:function(t){e.$set(e.carState,"camera_color_bar",t)},expression:"carState.camera_color_bar"}},[a("el-option",{attrs:{label:"关闭",value:0}}),a("el-option",{attrs:{label:"开启",value:1}})],1)],1),a("li",[a("i",{staticClass:"iconfont icon-quanping_huaban1"}),e._v("尺寸："),a("el-select",{class:"select-item ",attrs:{placeholder:"请选择","popper-class":"option-list"},model:{value:e.carState.camera_size,callback:function(t){e.$set(e.carState,"camera_size",t)},expression:"carState.camera_size"}},e._l(e.camera_size,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1)])]),a("div",{staticClass:"duoji-setting"},[a("ul",[a("li",[a("i",{staticClass:"iconfont icon-duoji1"}),e._v("一维舵机角度： "),a("el-slider",{staticClass:"duoji",attrs:{min:-135,max:135,step:1,"show-tooltip":""},model:{value:e.carState.cur_duoji_1_angle,callback:function(t){e.$set(e.carState,"cur_duoji_1_angle",t)},expression:"carState.cur_duoji_1_angle"}})],1),a("li",[a("i",{staticClass:"iconfont icon-chuangyipingtai_duoji"}),e._v("二维舵机角度： "),a("el-slider",{staticClass:"duoji",attrs:{min:-45,max:135,step:1,"show-tooltip":""},model:{value:e.carState.cur_duoji_2_angle,callback:function(t){e.$set(e.carState,"cur_duoji_2_angle",t)},expression:"carState.cur_duoji_2_angle"}})],1),a("li",[a("i",{staticClass:"iconfont icon-xuanzhuan"}),e._v("设置旋转速度： "),a("el-slider",{staticClass:"duoji",attrs:{min:0,max:200,step:1,"show-tooltip":""},model:{value:e.carState.set_dir_speed_whole,callback:function(t){e.$set(e.carState,"set_dir_speed_whole",t)},expression:"carState.set_dir_speed_whole"}})],1),a("li",[a("i",{staticClass:"iconfont icon-shipin2"}),e._v("默认开启视频： "),a("el-switch",{staticClass:"img-open",model:{value:e.carState.camera_is_abort,callback:function(t){e.$set(e.carState,"camera_is_abort",t)},expression:"carState.camera_is_abort"}})],1)])])])]),a("el-card",{staticClass:"box-card-mini"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("设备管理")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.handleAddDevice}},[e._v("添加设备")])],1),a("div",{staticClass:"device-manage"},[a("div",{staticClass:"device-manage-left"},[e._v(" 已有设备： "),a("el-card",{staticClass:"device-manage-card"},[a("ul",e._l(e.deviceList,(function(t,s){return a("li",{key:s},[a("div",{staticClass:"car-name",on:{click:function(t){return e.handleShowDevice(s)}}},[e._v(" "+e._s(t.name)+" ")]),a("el-button",{staticStyle:{flex:"1",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return e.handleDeleteDevice(t.secret,s)}}},[e._v("删除")])],1)})),0)])],1),a("div",{staticClass:"device-manage-right"},[e._v(" 设备详情： "),a("el-button",{staticStyle:{float:"right",padding:"5px"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleSaveDevice("edit")}}},[e._v("保存设备")]),a("el-card",{staticClass:"device-manage-card"},[a("div",[a("ul",[a("li",[e._v(" 设备名："),a("el-input",{staticClass:"car-manage-input",attrs:{size:"mini",placeholder:"请输入设备名"},model:{value:e.curDevice.name,callback:function(t){e.$set(e.curDevice,"name",t)},expression:"curDevice.name"}})],1),a("li",[e._v(" 设备密钥："),a("el-input",{staticClass:"car-manage-input",attrs:{size:"mini",placeholder:"请输入密钥"},model:{value:e.curDevice.secret,callback:function(t){e.$set(e.curDevice,"secret",t)},expression:"curDevice.secret"}})],1)])])])],1)])])],1)])},M=[],q=(a("a434"),a("b0c0"),{data:function(){return{camera_effectList:["正常","负片","黑白","偏红色","偏绿色","偏蓝色","复古"],camera_size:["160*120","176*144","320*240","400*240","352*288","640*480","800*600","1024*768","1280*800","1280*960","1440*900","1280*1024","1600*1200"],selectList:[0,1,2,3,4],mqttIsConnected:!1,controlIsConnected:!1,carState:{camera_is_abort:0,baudRate:115200,cur_duoji_1_angle:0,cur_duoji_2_angle:0,set_dir_speed_whole:20,camera_mode:0,camera_workmode:1,camera_contrast:2,camera_saturation:4,camera_effect:0,camera_autoexposure_level:0,camera_light_mode:4,camera_brightness:3,camera_color_bar:0,camera_size:5},fileList:[],loading:{upload:!1,cloudControl:!1,mqtt:!1},syncData:["cur_speed_whole","cur_speed_lq","cur_speed_rq","cur_speed_lh","cur_speed_rh","cur_duoji_1_angle","cur_duoji_2_angle","camera_mode","camera_workmode","camera_contrast","camera_saturation","camera_effect","camera_autoexposure_level","camera_light_mode","camera_brightness","camera_color_bar","camera_size","history_speed","history_frame"],syncGroup:[{label:"车速数据",data:[{value:"cur_speed_whole",label:"整体车速"},{value:"cur_speed_lq",label:"左前轮车速"},{value:"cur_speed_rq",label:"右前轮车速"},{value:"cur_speed_lh",label:"左后轮车速"},{value:"cur_speed_rh",label:"右后轮车速"}]},{label:"舵机数据",data:[{value:"cur_duoji_1_angle",label:"一维舵机角度"},{value:"cur_duoji_2_angle",label:"二维舵机角度"}]},{label:"摄像头数据",data:[{value:"camera_mode",label:"模式"},{value:"camera_workmode",label:"格式"},{value:"camera_contrast",label:"对比度"},{value:"camera_saturation",label:"饱和度"},{value:"camera_effect",label:"特效"},{value:"camera_autoexposure_level",label:"曝光"},{value:"camera_light_mode",label:"白平衡"},{value:"camera_brightness",label:"亮度"},{value:"camera_color_bar",label:"彩条"},{value:"camera_size",label:"尺寸"}]},{label:"历史数据",data:[{value:"history_speed",label:"小车车速"},{value:"history_frame",label:"视频帧率"}]}],deviceList:[],curDevice:{name:"",secret:""}}},created:function(){this.getSyncData(),this.getDefaultConfig(),this.getDeviceList()},methods:{showMessage:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case 0:a&&this.$message.success(t);break;case-1:break;default:a&&this.$message.warning(t);break}},commonRequest:function(e){var t=arguments,a=this;return Object(b["a"])(regeneratorRuntime.mark((function s(){var r,o,i,n,c,l,u;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=t.length>1&&void 0!==t[1]&&t[1],o=t.length>2&&void 0!==t[2]?t[2]:{},i=t.length>3&&void 0!==t[3]?t[3]:"post",n=localStorage.getItem("iotc_user")||"",c=localStorage.getItem("iotc_secret")||"",l={user:n,secret:c},s.prev=6,s.next=9,a.$http[i](e,Object.assign(l,o));case 9:u=s.sent,s.next=14;break;case 12:s.prev=12,s.t0=s["catch"](6);case 14:return a.showMessage(u.data.state,u.data.message,r),s.abrupt("return",u);case 16:case"end":return s.stop()}}),s,null,[[6,12]])})))()},uploadFile:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function a(){var s,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=new FormData,r=localStorage.getItem("iotc_secret")||"111",o={headers:{"Content-Type":"multipart/form-data"}},s.append("file",e.file),s.append("secret",r),a.prev=5,a.next=8,t.$http.post("/upload/firmware",s,o);case 8:i=a.sent,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](5),t.$message.warning("上传失败");case 14:t.showMessage(i.data.state,i.data.message,!0);case 15:case"end":return a.stop()}}),a,null,[[5,11]])})))()},getSyncData:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.commonRequest("/get/sync");case 2:a=t.sent,a.data.data&&(e.syncData=a.data.data.split(",")||[]);case 4:case"end":return t.stop()}}),t)})))()},getDefaultConfig:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.commonRequest("/get/default");case 2:a=t.sent,a.data.data&&Object.assign(e.carState,JSON.parse(a.data.data)||{});case 4:case"end":return t.stop()}}),t)})))()},deviceManage:function(e,t,a){var s=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,s.commonRequest("/manage/".concat(e),!0,{secret:t,name:a});case 2:o=r.sent,o.data.data&&(s.deviceList=JSON.parse(o.data.data)||[]);case 4:case"end":return r.stop()}}),r)})))()},getDeviceList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.commonRequest("/public/deviceList");case 2:a=t.sent,a.data.data&&(e.deviceList=JSON.parse(a.data.data)||[]);case 4:case"end":return t.stop()}}),t)})))()},handleShowDevice:function(e){this.curDevice.name=this.deviceList[e].name,this.curDevice.secret=this.deviceList[e].secret},handleSaveDevice:function(e){var t=this.curDevice;t.secret&&t.name?this.deviceManage(e,t.secret,t.name):this.$message.warning("字段不符合,请重新填写")},handleAddDevice:function(){this.deviceList.push({name:"",secret:""}),this.curDevice.name="",this.curDevice.secret=""},handleDeleteDevice:function(e,t){e&&this.deviceManage("delete",e),this.deviceList.splice(t,1)},handleConnectMqtt:function(){this.mqttIsConnected?this.commonRequest("/modify/connectMqtt",!0,{data:"0"}):this.commonRequest("/modify/connectMqtt",!0,{data:"1"})},handleConnectCloudControl:function(){this.controlIsConnected?this.commonRequest("/modify/connectCloudControl",!0,{data:"0"}):this.commonRequest("/modify/connectCloudControl",!0,{data:"1"})},handleChangeDefaultConfig:function(){this.commonRequest("/modify/default",!0,{data:this.carState})},handleChangeSyncData:function(){this.commonRequest("/modify/data",!0,{data:this.syncData})},handleBaudRate:function(){this.commonRequest("/modify/baudRate",!0,{data:this.carState.baudRate})},handleEntryBootloader:function(){this.commonRequest("/modify/entryBootloader",!0,{data:"1"})},handleQuitBootloader:function(){this.commonRequest("/modify/entryBootloader",!0,{data:"0"})},handleResetMqtt:function(){if(!this.controlIsConnected)return this.$message.warning("云控制服务器未连接,无法执行指令");this.commonRequest("/modify/resetMqtt",!0,{data:"1"})},handleResetCloudControl:function(){if(!this.mqttIsConnected)return this.$message.warning("MQTT服务器未连接,无法执行指令");this.commonRequest("/modify/resetCloudControl",!0,{data:"1"})},submitUpload:function(){var e=this;this.loading.upload=!0,setTimeout((function(){e.$refs.upload.submit()}),500)},handleUploadSuccess:function(){this.fileList=[],this.loading.upload=!1},handleUploadError:function(){this.loading.upload=!1}}}),F=q,P=(a("d4d4"),Object(i["a"])(F,T,M,!1,null,"24ec6782",null)),B=P.exports;s["default"].use(u["a"]);var A=[{path:"/login",name:"login",component:k,meta:{isPublic:!0}},{path:"/",name:"main",redirect:"/config"},{path:"/layout",name:"layout",component:_,children:[{path:"/home",name:"home",component:R},{path:"/config",name:"config",component:B}]}],U=new u["a"]({routes:A});U.beforeEach((function(e,t,a){if(!e.meta.isPublic&&!localStorage.getItem("iotc_token"))return a("/login");a()}));var W=U,N=(a("0fae"),a("9e2f")),H=a.n(N);a("c69f");s["default"].use(H.a);a("6672");var X=a("bc3a"),Y=a.n(X),J=a("313e");s["default"].prototype.$echarts=J,s["default"].config.productionTip=!1,s["default"].prototype.$http=Y.a.create({baseURL:"https://wlw.5102it.cn"}),s["default"].prototype.$http.interceptors.request.use((function(e){return e.headers.common["Authorization"]="Bearer ".concat(localStorage.getItem("iotc_token")||""),e})),s["default"].prototype.$http.interceptors.response.use((function(e){return-1===e.data.state&&(localStorage.removeItem("iotc_token"),Q.$message.warning("登录已过期,请重新登录！"),Q.$router.push("/login")),e}));var Q=new s["default"]({router:W,render:function(e){return e(l)}}).$mount("#app")},"57e7":function(e,t,a){},6672:function(e,t,a){},7209:function(e,t,a){},"85ec":function(e,t,a){},"9b07":function(e,t,a){"use strict";var s=a("7209"),r=a.n(s);r.a},"9b2b":function(e,t,a){},b2dc:function(e,t,a){},bf65:function(e,t,a){"use strict";var s=a("b2dc"),r=a.n(s);r.a},c69f:function(e,t,a){},d4d4:function(e,t,a){"use strict";var s=a("9b2b"),r=a.n(s);r.a}});